import { useEffect, useState } from "react";
import useApi from "@/utils/useApi";
import "./homePage.css";
import UniverseBlock from "@/components/common/UniverseBlock/UniverseBlock";
import NavBar from "@/components/common/NavBar/NavBar";
import { Helmet } from "react-helmet";

const apiURL = process.env.API_URL;

const HomePage = () => {
  const { data } = useApi(`${apiURL}/api/universes`);
  const [universes, setUniverses] = useState([]);

  useEffect(() => {
    if (!data) return;
    setUniverses(
      data.map((universe) => ({
        id: universe.id,
        title: universe.title,
        imgUrl: universe.imgUrl,
        duration: universe.duration,
        number: universe.number,
      }))
    );
  }, [data]);

  return (
    <div className="home-page">
      <Helmet>
        <title>CinemaRM</title>
        <meta
          name="description"
          content="Explore cinematic universes and franchises and track your progress with interactive roadmaps"
        />
        <meta
          name="keywords"
          content="movie release order, cinematic universe guide, franchise release roadmap, film release timeline, interactive movie roadmap, movie series guide, film franchise order, cinematic universe release order, movie release tracker, film franchise timeline, movie franchise list, film series roadmap, cinematic universe tracker, movie viewing order, film franchise guide, movie series release dates, movie universe timeline, film series release order, cinematic universe list, movie release schedule"
        />
      </Helmet>
      <div className="page-container">
        <header>
          <NavBar position={"absolute"}></NavBar>
          <section className="hero">
            <div className="back-grid"></div>
            <div className="wrapper">
              <h1 className="anton-regular">
                <span className="stick">Explore Spectacular</span>{" "}
                <span className="stick">New Worlds</span>
              </h1>
              <h5 className="merriweather-light">
                Track your progress with interactive roadmaps
              </h5>
            </div>
          </section>
        </header>
        <main>
          <section className="content-list">
            <h3>CHOOSE A UNIVERSE</h3>
            {universes.map((universe) => (
              <UniverseBlock
                key={universe.id}
                universe={universe}
              ></UniverseBlock>
            ))}
            <h4>More are coming...</h4>
          </section>
        </main>
        <footer className="footer">
          <div className="wrapper">
            <p>&copy; 2024 HarperVenom</p>
            <div className="contact-links">
              <a class="hidden" href="https://t.me/harperv" target="_blank">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="50"
                  height="50"
                  viewBox="0 0 24 24"
                  fill="var(--text)"
                >
                  <path d="M 20.302734 2.984375 C 20.013769 2.996945 19.748583 3.080055 19.515625 3.171875 C 19.300407 3.256634 18.52754 3.5814726 17.296875 4.0976562 C 16.06621 4.61384 14.435476 5.2982348 12.697266 6.0292969 C 9.2208449 7.4914211 5.314238 9.1361259 3.3125 9.9785156 C 3.243759 10.007156 2.9645852 10.092621 2.65625 10.328125 C 2.3471996 10.564176 2.0039062 11.076462 2.0039062 11.636719 C 2.0039062 12.088671 2.2295201 12.548966 2.5019531 12.8125 C 2.7743861 13.076034 3.0504903 13.199244 3.28125 13.291016 L 3.28125 13.289062 C 4.0612776 13.599827 6.3906939 14.531938 6.9453125 14.753906 C 7.1420423 15.343433 7.9865895 17.867278 8.1875 18.501953 L 8.1855469 18.501953 C 8.3275588 18.951162 8.4659791 19.243913 8.6582031 19.488281 C 8.7543151 19.610465 8.8690398 19.721184 9.0097656 19.808594 C 9.0637596 19.842134 9.1235454 19.868148 9.1835938 19.892578 C 9.191962 19.896131 9.2005867 19.897012 9.2089844 19.900391 L 9.1855469 19.894531 C 9.2029579 19.901531 9.2185841 19.911859 9.2363281 19.917969 C 9.2652427 19.927926 9.2852873 19.927599 9.3242188 19.935547 C 9.4612233 19.977694 9.5979794 20.005859 9.7246094 20.005859 C 10.26822 20.005859 10.601562 19.710937 10.601562 19.710938 L 10.623047 19.695312 L 12.970703 17.708984 L 15.845703 20.369141 C 15.898217 20.443289 16.309604 21 17.261719 21 C 17.829844 21 18.279025 20.718791 18.566406 20.423828 C 18.853787 20.128866 19.032804 19.82706 19.113281 19.417969 L 19.115234 19.416016 C 19.179414 19.085834 21.931641 5.265625 21.931641 5.265625 L 21.925781 5.2890625 C 22.011441 4.9067171 22.036735 4.5369631 21.935547 4.1601562 C 21.834358 3.7833495 21.561271 3.4156252 21.232422 3.2226562 C 20.903572 3.0296874 20.591699 2.9718046 20.302734 2.984375 z M 19.908203 5.1738281 C 19.799442 5.7198576 17.33401 18.105877 17.181641 18.882812 L 13.029297 15.041016 L 10.222656 17.414062 L 11 14.375 C 11 14.375 16.362547 8.9468594 16.685547 8.6308594 C 16.945547 8.3778594 17 8.2891719 17 8.2011719 C 17 8.0841719 16.939781 8 16.800781 8 C 16.675781 8 16.506016 8.1197812 16.416016 8.1757812 C 15.272368 8.8887854 10.401283 11.664685 8.0058594 13.027344 C 7.8617016 12.96954 5.6973962 12.100458 4.53125 11.634766 C 6.6055146 10.76177 10.161156 9.2658083 13.472656 7.8730469 C 15.210571 7.142109 16.840822 6.4570977 18.070312 5.9414062 C 19.108158 5.5060977 19.649538 5.2807035 19.908203 5.1738281 z M 17.152344 19.025391 C 17.152344 19.025391 17.154297 19.025391 17.154297 19.025391 C 17.154252 19.025621 17.152444 19.03095 17.152344 19.03125 C 17.153615 19.024789 17.15139 19.03045 17.152344 19.025391 z"></path>
                </svg>
              </a>
              <a
                class="hidden"
                href="https://discordapp.com/users/414710497758281738"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="50"
                  height="50"
                  viewBox="0 0 24 24"
                  fill="var(--text)"
                >
                  <path d="M 8.7734375 3.4960938 C 8.5929417 3.4690583 8.4065423 3.4725694 8.2207031 3.5097656 L 8.21875 3.5097656 C 7.2160773 3.710684 6.1961914 4.0606837 5.171875 4.4804688 C 4.5923316 4.7191823 4.0998219 5.1323469 3.7597656 5.6601562 C 1.3854919 9.3324524 0.71364859 13.154805 1.1054688 16.958984 A 0.750075 0.750075 0 0 0 1.4453125 17.513672 C 2.9188803 18.466797 4.4466234 19.302809 6.0742188 19.876953 C 6.8097408 20.142253 7.6322714 19.829103 8.0449219 19.181641 L 8.7226562 18.117188 C 8.7507244 18.124676 8.780475 18.129303 8.8085938 18.136719 C 9.818916 18.469666 10.883333 18.667969 11.992188 18.667969 C 13.109497 18.667969 14.182765 18.465733 15.201172 18.126953 C 15.215234 18.123201 15.230089 18.120958 15.244141 18.117188 L 15.957031 19.205078 C 16.373184 19.838805 17.18648 20.138052 17.910156 19.884766 A 0.750075 0.750075 0 0 0 17.912109 19.882812 C 19.544812 19.305701 21.077308 18.467281 22.554688 17.513672 A 0.750075 0.750075 0 0 0 22.894531 16.958984 C 23.282299 13.194151 22.615704 9.4127588 20.300781 5.7753906 C 20.29997 5.7741206 20.299728 5.7727644 20.298828 5.7714844 A 0.750075 0.750075 0 0 0 20.238281 5.6582031 A 0.750075 0.750075 0 0 0 20.238281 5.65625 C 19.895486 5.1283093 19.403445 4.7199394 18.828125 4.4824219 A 0.750075 0.750075 0 0 0 18.826172 4.4804688 C 17.80055 4.0590984 16.78086 3.7105465 15.78125 3.5097656 L 15.78125 3.5117188 C 15.03607 3.3615872 14.281853 3.757794 13.947266 4.4355469 C 13.387976 4.3783498 12.823864 4.3208671 12 4.3398438 C 11.178342 4.3207632 10.613913 4.3781228 10.052734 4.4355469 C 9.8021561 3.9288376 9.314925 3.5772002 8.7734375 3.4960938 z M 8.5136719 4.9804688 A 0.750075 0.750075 0 0 0 8.515625 4.9804688 C 8.584678 4.9665567 8.6527414 4.9853888 8.7089844 5.0996094 A 0.750075 0.750075 0 0 0 8.7109375 5.1054688 L 8.9316406 5.5429688 A 0.750075 0.750075 0 0 0 9.7070312 5.9472656 C 10.287692 5.8651142 10.980259 5.8156606 11.980469 5.8398438 A 0.750075 0.750075 0 0 0 12.017578 5.8398438 C 13.02044 5.8156668 13.712896 5.8658688 14.292969 5.9472656 A 0.750075 0.750075 0 0 0 15.066406 5.5449219 L 15.287109 5.1074219 A 0.750075 0.750075 0 0 0 15.291016 5.0996094 C 15.346426 4.9873623 15.417508 4.9666033 15.486328 4.9804688 C 16.348167 5.153577 17.284239 5.4708688 18.253906 5.8691406 C 18.548858 5.9909097 18.797593 6.1951599 18.976562 6.46875 A 0.750075 0.750075 0 0 0 18.978516 6.4726562 C 21.091211 9.7393292 21.669345 13.034494 21.384766 16.435547 C 20.082956 17.252777 18.77061 17.989072 17.414062 18.46875 C 17.337743 18.49546 17.276783 18.483093 17.210938 18.382812 L 16.646484 17.521484 C 16.828406 17.428669 17.017189 17.349176 17.193359 17.246094 A 0.75018365 0.75018365 0 1 0 16.435547 15.951172 C 15.56384 16.461232 14.610358 16.807654 13.609375 16.998047 C 13.086305 17.07849 12.548154 17.130166 11.986328 17.142578 C 11.431981 17.1299 10.897287 17.076725 10.376953 16.998047 C 9.3737539 16.807899 8.4185715 16.462014 7.5449219 15.951172 A 0.750075 0.750075 0 0 0 7.1152344 15.84375 A 0.750075 0.750075 0 0 0 6.7890625 17.246094 C 6.9627987 17.347681 7.1488441 17.425954 7.328125 17.517578 L 6.78125 18.375 C 6.715901 18.477536 6.6505091 18.489547 6.5820312 18.464844 A 0.750075 0.750075 0 0 0 6.578125 18.462891 C 5.2246363 17.985905 3.9148265 17.252875 2.6152344 16.435547 C 2.3306552 13.034494 2.9087891 9.7393292 5.0214844 6.4726562 C 5.1994281 6.1964656 5.4477309 5.988474 5.7421875 5.8671875 C 6.713275 5.4692168 7.6489097 5.1536062 8.5136719 4.9804688 z M 8.75 10 C 7.789 10 7 10.904 7 12 C 7 13.096 7.789 14 8.75 14 C 9.711 14 10.5 13.096 10.5 12 C 10.5 10.904 9.711 10 8.75 10 z M 15.25 10 C 14.289 10 13.5 10.904 13.5 12 C 13.5 13.096 14.289 14 15.25 14 C 16.211 14 17 13.096 17 12 C 17 10.904 16.211 10 15.25 10 z"></path>
                </svg>
              </a>
            </div>
          </div>
        </footer>
      </div>
    </div>
  );
};

export default HomePage;
